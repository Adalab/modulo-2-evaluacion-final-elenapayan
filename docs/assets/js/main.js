"use strict";const btn=document.querySelector(".js-btn"),input=document.querySelector(".js-input"),ulList=document.querySelector(".js-right-list"),ulFavorites=document.querySelector(".js-left-list");let favoriteObject,favoriteList=[],data=[],list="";function getMovies(){fetch(`http://api.tvmaze.com/search/shows?q=${input.value}`).then(function(t){return t.json()}).then(function(t){data=t,paintMovies(),activateToggle()})}function paintMovies(){list="",ulList.innerHTML="";for(let t=0;t<data.length;t++){null===data[t].show.image&&(data[t].show.image={medium:"http://via.placeholder.com/210x295"});let e="";-1!==getFavIndex(data[t].show.id)&&(e="change-color"),list+=`<li class="js-content right-list-container ${e}" id="${data[t].show.id}">`,list+=`<img class="js-image image" src="${data[t].show.image.medium}" alt="Foto ${data[t].show.name}"/>`,list+=`<h4 class="title">${data[t].show.name}</h4>`,list+="</li>"}ulList.innerHTML+=list}function getResults(t){t.preventDefault(),getMovies()}function activateToggle(){const t=document.querySelectorAll(".js-content");for(let e=0;e<t.length;e++)t[e].addEventListener("click",addFavorites)}function paintFavs(){list="",ulFavorites.innerHTML="";for(let t=0;t<favoriteList.length;t++)list+=`<li class="js-content left-list-container" id="${favoriteList[t].id}">`,list+=`<img class="js-image image" src="${favoriteList[t].image}" alt="Foto ${favoriteList[t].name}"/>`,list+=`<h4 class="title">${favoriteList[t].name}</h4>`,list+="</li>";ulFavorites.innerHTML+=list}function addFavorites(t){let e=t.currentTarget.querySelector(".title"),i=t.currentTarget.querySelector(".js-image"),a=getFavIndex((favoriteObject={id:t.currentTarget.id,name:e.textContent,image:i.src}).id);-1===a?favoriteList.push(favoriteObject):favoriteList.splice(a,1),localStorage.setItem("favoriteList",JSON.stringify(favoriteList)),paintFavs(),paintMovies(),activateToggle()}function getFavIndex(t){for(let e=0;e<favoriteList.length;e++)if(parseInt(favoriteList[e].id)===parseInt(t))return e;return-1}function getLocalStorage(){const t=localStorage.getItem("favoriteList"),e=JSON.parse(t);null!==e&&(favoriteList=e,paintFavs())}btn.addEventListener("click",getResults),getLocalStorage();